<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "https://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="kr.co.api.backend.mapper.admin.SurveyMapper">

    <insert id="insertSurvey"
            parameterType="kr.co.api.backend.dto.SurveyDTO"
            useGeneratedKeys="true"
            keyProperty="surveyId"
            keyColumn="survey_id">
        INSERT INTO TB_SURVEY (
            title,
            description,
            is_active,
            created_by,
            updated_by
        ) VALUES (
            #{title},
            #{description},
            #{isActive},
            #{createdBy},
            #{updatedBy}
        )
    </insert>

    <insert id="insertSurveyQuestion"
            parameterType="kr.co.api.backend.dto.SurveyQuestionDTO"
            useGeneratedKeys="true"
            keyProperty="qId"
            keyColumn="q_id">
        INSERT INTO TB_SURVEY_Q (
            survey_id,
            q_no,
            q_key,
            q_text,
            q_type,
            is_required,
            max_select,
            is_active,
            created_by,
            updated_by
        ) VALUES (
            #{surveyId},
            #{qNo},
            #{qKey},
            #{qText},
            #{qType},
            #{isRequired},
            #{maxSelect, jdbcType=INTEGER},
            #{isActive},
            #{createdBy},
            #{updatedBy}
        )
    </insert>

    <insert id="insertSurveyOption"
            parameterType="kr.co.api.backend.dto.SurveyOptionDTO"
            useGeneratedKeys="true"
            keyProperty="optId"
            keyColumn="opt_id">
        INSERT INTO TB_SURVEY_OPT (
            q_id,
            opt_code,
            opt_text,
            opt_value,
            opt_order,
            is_active,
            created_by,
            updated_by
        ) VALUES (
            #{qId},
            #{optCode},
            #{optText},
            #{optValue},
            #{optOrder, jdbcType=INTEGER},
            #{isActive},
            #{createdBy},
            #{updatedBy}
        )
    </insert>

</mapper>
